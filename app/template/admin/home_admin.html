{% extends 'dashboard.html'%}

{% block title %}
    <a class="sidebar-brand d-flex align-items-center justify-content-center" href="/admin/">
        <div class="sidebar-brand-icon rotate-n-15">
            <i class="fas fa-laugh-wink"></i>
        </div>
        <div class="sidebar-brand-text mx-3">InvenSoft</div>
    </a>        
{% endblock %}
{% block sidebar %}
    <li class="nav-item active">
        <a class="nav-link" href="/admin/">
            <i class="fa-solid fa-cart-shopping"></i>
            Producto
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link collapsed" href="/admin/admins/">
            <i class="fa-solid fa-user-tie"></i> Administradores
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link collapsed" href="/admin/cashiers/">
            <i class="fa-solid fa-cash-register"></i> Cajeros
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link collapsed" href="/admin/providers/">
            <i class="fa-solid fa-truck"></i> Proveedores
        </a>
    </li>      
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-4 card">
        <h1 class="container text-center"> Ingresar producto</h1>
        <form action="create_product/" method="post" class="">
            {% csrf_token %}
            <label for="nombre">Nombre</label>
            <input type="text" name="nombre" id="" class="form-control">
            <label for="">Precio Compra</label>
            <input type="number" name="precio" id="" class="form-control">
            <label for="">Cantidad</label>
            <input type="number" name="cantidad" id="" class="form-control">
            <label for="">Porcentaje de iva</label>
            <input type="number" name="iva" id="" class="form-control">
            <label for="">Proveedor</label>
            <div class="input-group mb-3">
                <label class="input-group-text" for="inputGroupSelect01">Options</label>
                <select class="form-select" id="inputGroupSelect01" name="provider">
                  <option disabled>Escoja una opcion</option>
                    {% for providers in providers %}
                        <option value="{{providers.nitProvider}}">{{providers.nitProvider}} - {{providers.nomProvider}}</option>
                    {%endfor%}
                </select>
              </div>
            <button type="submit" class="btn btn-primary">Registrar</button>
        </form>
    </div>
    <div class="col-8">
        <button type="button" class="btn btn-success">Generar inventario Excel</button>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Precio de compra</th>
                    <th scope="col">Iva</th>
                    <th scope="col">Stock </th>
                    <th scope="col">NIT Proveedor</th>
                    <th scope="col"> Opciones</th>
                </tr>
            </thead>
            <tbody>
                {% for data in data %}
                <tr>
                    <th>{{ data.idProducto}}</th>
                    <td>{{ data.nombreProducto}}</td>
                    <td>{{ data.precioCompra}}</td>
                    <td>{{ data.ivaProducto|floatformat:"2" }} %</td>
                    <td>{{ data.stockProducto}}</td>
                    <td>{{ data.nitProveedor.nitProvider}}</td>
                    <td> 
                        <button class="btn btn-danger" onclick="deleteNote({{ data.idProducto}},'{{ csrf_token }}','product' )"><i class="fa-solid fa-trash"></i></button>
                        <a href="" class="btn btn-primary"><i class="fa-regular fa-pen-to-square"></i></a>
                    </td>
                </tr>
                {% endfor%}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}